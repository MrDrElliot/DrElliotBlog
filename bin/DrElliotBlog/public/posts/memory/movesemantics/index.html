<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Move Semantics | Dr. Elliot</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="https://www.dr-elliot.com/posts/memory/movesemantics/">
  <meta property="og:site_name" content="Dr. Elliot">
  <meta property="og:title" content="Move Semantics">
  <meta property="og:description" content="Hello! Today, I want to talk about a commonly misunderstood concept in programming: Move Semantics.
Move semantics involve efficiently transferring ownership of resources (like memory) from one object to another. This could be for a number of reasons, one example is for directly transferring ownership (which we will demonstrate) down below.
Understanding L-values and R-values Before we dive into move semantics, we need to understand the fundamental distinction between l-values and r-values.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-11T12:28:45-05:00">
    <meta property="article:modified_time" content="2025-10-11T12:28:45-05:00">
    <meta property="article:tag" content="CPP">
    <meta property="article:tag" content="C&#43;&#43;">
    <meta property="article:tag" content="Optimization">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Move Semantics">
  <meta name="twitter:description" content="Hello! Today, I want to talk about a commonly misunderstood concept in programming: Move Semantics.
Move semantics involve efficiently transferring ownership of resources (like memory) from one object to another. This could be for a number of reasons, one example is for directly transferring ownership (which we will demonstrate) down below.
Understanding L-values and R-values Before we dive into move semantics, we need to understand the fundamental distinction between l-values and r-values.">

      <link rel="stylesheet" href="/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css" integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H&#43;ZeT/jBpieRZ8=" crossorigin="anonymous">
      <link rel="stylesheet" href="/css/bundle.min.59eb1a059f8cd558e64375ede3e68d3e9120ddb0c6bdbab555c247689cef59e1.css" integrity="sha256-WesaBZ&#43;M1VjmQ3Xt4&#43;aNPpEg3bDGvbq1VcJHaJzvWeE=" crossorigin="anonymous">

      <script src="/js/bundle.cc8ae9952dbfb731affafabdf26e5c60a6910047ff59ccdeaf1daebaa26c8830.js" integrity="sha256-zIrplS2/tzGv&#43;vq98m5cYKaRAEf/Wczerx2uuqJsiDA=" crossorigin="anonymous"></script><script defer src="/js/search/flexsearch.compact.5e0de3b335e5c523c7cf45473dc43fccb6c75f64a9d59cc04a6eccbb7c25eb49.js" integrity="sha256-Xg3jszXlxSPHz0VHPcQ/zLbHX2Sp1ZzASm7Mu3wl60k="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="https://www.dr-elliot.com/" style="color: inherit;">Dr. Elliot</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="/lumina/lumina/"
      >Lumina</a>
    </div>
    <div class="nav-item">
      <a href="/about/aboutme/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="/lumina/lumina/"
      >Lumina</a>
    </div>
    <div class="nav-item">
      <a href="/about/aboutme/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://www.dr-elliot.com/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://www.dr-elliot.com/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Move Semantics</h1><time class="dim" datetime="2025-10-11T12:28:45-05:00">October 11, 2025</time><div class="term-container"><div class="tag">
        <a href="https://www.dr-elliot.com/tags/cpp/">#CPP</a>
      </div><div class="tag">
        <a href="https://www.dr-elliot.com/tags/c&#43;&#43;/">#C&#43;&#43;</a>
      </div><div class="tag">
        <a href="https://www.dr-elliot.com/tags/optimization/">#Optimization</a>
      </div></ol></div>

  <section class="page-section"><p>Hello! Today, I want to talk about a commonly misunderstood concept in programming: <strong>Move Semantics</strong>.</p>
<p>Move semantics involve efficiently transferring ownership of resources (like memory) from one object to another. This could be for a number of reasons, one example is for directly transferring ownership (which we will demonstrate) down below.</p>
<h2 id="understanding-l-values-and-r-values">Understanding L-values and R-values</h2>
<p>Before we dive into move semantics, we need to understand the fundamental distinction between l-values and r-values.</p>
<p><strong>L-values</strong> (left values) are expressions that refer to a memory location and allow us to take their address. They have a persistent identity beyond a single expression.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;        <span style="color:#75715e">// &#39;x&#39; is an l-value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> ptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>x;     <span style="color:#75715e">// We can take the address of &#39;x&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>x <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>;            <span style="color:#75715e">// We can assign to &#39;x&#39;
</span></span></span></code></pre></div><p><strong>R-values</strong> (right values) are temporary values that don&rsquo;t have a persistent memory address. They&rsquo;re typically the result of expressions or literals.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>;     <span style="color:#75715e">// &#39;5 + 3&#39; is an r-value (temporary result)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> z <span style="color:#f92672">=</span> x <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>;     <span style="color:#75715e">// &#39;x * 2&#39; is an r-value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// int* ptr = &amp;(x + 1);  // Error! Can&#39;t take address of r-value
</span></span></span></code></pre></div><p>Think of it this way: l-values can appear on the left side of an assignment, r-values typically appear on the right side.</p>
<h2 id="the-problem-move-semantics-solves">The Problem Move Semantics Solves</h2>
<p>Consider what happens when we return a large object from a function or pass it around:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BigData</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> data;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    BigData(size_t size) <span style="color:#f92672">:</span> data(size, <span style="color:#ae81ff">0</span>) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Constructor: Allocating &#34;</span> <span style="color:#f92672">&lt;&lt;</span> size <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; elements</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Copy constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    BigData(<span style="color:#66d9ef">const</span> BigData<span style="color:#f92672">&amp;</span> other) <span style="color:#f92672">:</span> data(other.data) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Copy Constructor: Copying &#34;</span> <span style="color:#f92672">&lt;&lt;</span> data.size() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; elements</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    size_t <span style="color:#a6e22e">size</span>() <span style="color:#66d9ef">const</span> { <span style="color:#66d9ef">return</span> data.size(); }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>BigData <span style="color:#a6e22e">CreateBigData</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BigData temp(<span style="color:#ae81ff">1000000</span>);  <span style="color:#75715e">// Create a big object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> temp;            <span style="color:#75715e">// Without move semantics, this copies!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BigData myData <span style="color:#f92672">=</span> CreateBigData();  <span style="color:#75715e">// Another copy!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Without move semantics, this code would perform expensive deep copies of the entire vector, even though <code>temp</code> is about to be destroyed anyway. That&rsquo;s wasteful!</p>
<h2 id="enter-move-semantics">Enter Move Semantics</h2>
<p>Move semantics allow us to &ldquo;steal&rdquo; resources from temporary objects (r-values) that are about to die anyway. Instead of copying, we simply transfer ownership.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BigData</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> data;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    BigData(size_t size) <span style="color:#f92672">:</span> data(size, <span style="color:#ae81ff">0</span>) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Constructor: Allocating &#34;</span> <span style="color:#f92672">&lt;&lt;</span> size <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; elements</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Copy constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    BigData(<span style="color:#66d9ef">const</span> BigData<span style="color:#f92672">&amp;</span> other) <span style="color:#f92672">:</span> data(other.data) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Copy Constructor: Copying &#34;</span> <span style="color:#f92672">&lt;&lt;</span> data.size() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; elements</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    BigData(BigData<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> <span style="color:#f92672">:</span> data(std<span style="color:#f92672">::</span>move(other.data))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Move Constructor: Transferring ownership</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Copy assignment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    BigData<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> BigData<span style="color:#f92672">&amp;</span> other)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Copy Assignment</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>other) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            data <span style="color:#f92672">=</span> other.data;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move assignment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    BigData<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(BigData<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Move Assignment: Transferring ownership</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>other) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            data <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(other.data);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    size_t <span style="color:#a6e22e">size</span>() <span style="color:#66d9ef">const</span> { <span style="color:#66d9ef">return</span> data.size(); }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>BigData <span style="color:#a6e22e">CreateBigData</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BigData temp(<span style="color:#ae81ff">1000000</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> temp;  <span style="color:#75715e">// Move constructor is called!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    BigData myData <span style="color:#f92672">=</span> CreateBigData();  <span style="color:#75715e">// Move, not copy!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Final size: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> myData.size() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Output:</p>
<pre tabindex="0"><code>Constructor: Allocating 1000000 elements
Move Constructor: Transferring ownership
Final size: 1000000
</code></pre><p>Notice the <code>&amp;&amp;</code> syntax? That&rsquo;s an <strong>r-value reference</strong>, which allows us to bind to temporary objects and move from them.</p>
<h2 id="when-to-use-move-semantics">When to Use Move Semantics</h2>
<h3 id="1-returning-large-objects-from-functions">1. Returning Large Objects from Functions</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> GenerateLargeVector()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> result(<span style="color:#ae81ff">1000000</span>, <span style="color:#ae81ff">42</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> result;  <span style="color:#75715e">// Automatically moved (RVO or move constructor)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> myVec <span style="color:#f92672">=</span> GenerateLargeVector();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-transferring-ownership-explicitly">2. Transferring Ownership Explicitly</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;memory&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Resource</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>unique_ptr<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>[]<span style="color:#f92672">&gt;</span> buffer;
</span></span><span style="display:flex;"><span>    size_t size;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Resource(size_t s) 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> buffer(std<span style="color:#f92672">::</span>make_unique<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>[]<span style="color:#f92672">&gt;</span>(s)), size(s)
</span></span><span style="display:flex;"><span>    {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Resource(Resource<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> buffer(std<span style="color:#f92672">::</span>move(other.buffer))
</span></span><span style="display:flex;"><span>        , size(other.size) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        other.size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move assignment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Resource<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(Resource<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>other) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            buffer <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(other.buffer);
</span></span><span style="display:flex;"><span>            size <span style="color:#f92672">=</span> other.size;
</span></span><span style="display:flex;"><span>            other.size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Resource r1(<span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>    Resource r2 <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(r1);  <span style="color:#75715e">// Explicitly transfer ownership
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// r1 is now in a valid but unspecified state
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id="3-working-with-containers">3. Working with Containers</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span> names;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>string temp <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Alice&#34;</span>;
</span></span><span style="display:flex;"><span>    names.push_back(temp);              <span style="color:#75715e">// Copy (temp still usable)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    names.push_back(std<span style="color:#f92672">::</span>move(temp));   <span style="color:#75715e">// Move (temp now empty)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    names.push_back(<span style="color:#e6db74">&#34;Bob&#34;</span>);             <span style="color:#75715e">// Move (temporary string)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    names.emplace_back(<span style="color:#e6db74">&#34;Charlie&#34;</span>);      <span style="color:#75715e">// Constructed directly in vector
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id="4-implementing-the-rule-of-five">4. Implementing the Rule of Five</h3>
<p>If your class manages resources, implement all five special member functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ResourceManager</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> data;
</span></span><span style="display:flex;"><span>    size_t size;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ResourceManager(size_t s) 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> data(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[s])
</span></span><span style="display:flex;"><span>        , size(s)
</span></span><span style="display:flex;"><span>    {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Destructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">~</span>ResourceManager() { <span style="color:#66d9ef">delete</span>[] data; }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Copy constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ResourceManager(<span style="color:#66d9ef">const</span> ResourceManager<span style="color:#f92672">&amp;</span> other) 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> data(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[other.size]), size(other.size) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        std<span style="color:#f92672">::</span>copy(other.data, other.data <span style="color:#f92672">+</span> size, data);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Copy assignment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ResourceManager<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> ResourceManager<span style="color:#f92672">&amp;</span> other) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>other) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">delete</span>[] data;
</span></span><span style="display:flex;"><span>            size <span style="color:#f92672">=</span> other.size;
</span></span><span style="display:flex;"><span>            data <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[size];
</span></span><span style="display:flex;"><span>            std<span style="color:#f92672">::</span>copy(other.data, other.data <span style="color:#f92672">+</span> size, data);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ResourceManager(ResourceManager<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> data(other.data), size(other.size) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        other.data <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
</span></span><span style="display:flex;"><span>        other.size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move assignment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ResourceManager<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(ResourceManager<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>other) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">delete</span>[] data;
</span></span><span style="display:flex;"><span>            data <span style="color:#f92672">=</span> other.data;
</span></span><span style="display:flex;"><span>            size <span style="color:#f92672">=</span> other.size;
</span></span><span style="display:flex;"><span>            other.data <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
</span></span><span style="display:flex;"><span>            other.size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="common-pitfalls-and-best-practices">Common Pitfalls and Best Practices</h2>
<h3 id="dont-move-from-l-values-unless-intentional">Don&rsquo;t Move from L-values Unless Intentional</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>std<span style="color:#f92672">::</span>string name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Alice&#34;</span>;
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>string copy1 <span style="color:#f92672">=</span> name;              <span style="color:#75715e">// Copy, name still usable
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>std<span style="color:#f92672">::</span>string copy2 <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(name);   <span style="color:#75715e">// Move, name now empty
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Using &#39;name&#39; here is dangerous!
</span></span></span></code></pre></div><h3 id="mark-move-operations-as-noexcept">Mark Move Operations as <code>noexcept</code></h3>
<p>Move operations should be marked <code>noexcept</code> when possible, as this allows containers to optimize their behavior:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>BigData(BigData<span style="color:#f92672">&amp;&amp;</span> other) <span style="color:#66d9ef">noexcept</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Move implementation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id="use-stdmove-carefully">Use <code>std::move</code> Carefully</h3>
<p><code>std::move</code> doesn&rsquo;t actually move anything, it just casts an l-value to an r-value reference, enabling move semantics:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> v1 <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>};
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> v2 <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(v1);  <span style="color:#75715e">// v1 is now empty
</span></span></span></code></pre></div><h3 id="moved-from-objects-are-valid-but-unspecified">Moved-from Objects are Valid but Unspecified</h3>
<p>After moving from an object, it remains in a valid state, but you shouldn&rsquo;t assume what that state is. You can safely destroy it or assign to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>std<span style="color:#f92672">::</span>string s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello&#34;</span>;
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>string s2 <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(s1);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// s1 is valid but empty
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;World&#34;</span>;  <span style="color:#75715e">// OK - assigning new value
</span></span></span></code></pre></div><h2 id="performance-benefits">Performance Benefits</h2>
<p>Move semantics can provide dramatic performance improvements:</p>
<p><a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1DIApACYAQuYukl9ZATwDKjdAGFUtAK4sGe1wAyeAyYAHI%2BAEaYxCAAzACspAAOqAqETgwe3r56KWmOAkEh4SxRMQm2mPYFDEIETMQEWT5%2BXJXVGXUNBEVhkdFxiQr1jc05bcPdvSVlgwCUtqhexMjsHOaxwcjeWADUJrFuyAjEAqgH2CYaAIIbWzuY%2B4dOw8SYrBdXt2abDNteewObgAbpgHCRPjcvsDUHh0LsCJhhh4kgBPCBzfZQgDsVhuuwJu2G6BAIFB4OIQOCBAuRKWK0wEC4GhZrI0pF2kjMcwOeOuhN2TC8RCJIwITwAIqKSSgTmdSQg8MAEAB9N4KTzCjIq7aoZAAa1JDFQAHcMbyvgLLYTiaTyURKc9BLSsMNJXTlqteQSAPQ%2B3Yo1HWgnBwXC1C7Vzu22y07GhVK1XqzU1HW0PWGkDGs082J8gUx45x1Ck9DLJg1IHoJYRegcmMsOi0PC0qpMJJKeEHKVRgC0ou6FvxNoIMrQwqebiB%2BzMZkDCNQqENM7Mk%2BnbY7mHQADpx4IMWvDivdiwFCZ4m4GOYzEPbtiJV9obD4YjhgBZVCgg%2BP3GhmP2iEnRpWJsA9BkmTZVkOS5XN80JIURUmRpo1HUki3lEBFWVNUkRTbVdQNI1TXNPNQz/VCyTBB0qWdEDdldcVu2lUkWE/RkNU9TBYN9f0P1BMjhwJBCIyjJjCzleNMMTHCNW8VMCMzbMSLgglxOLUty0rQ5qy8WtMHrCjG1oZtWwMTcu1iHsGHhfskOAlTmJQJZGMOadrz4x4iCXEBjyBdczM7Xcln3TE/KPa8TzPC8r1nW8THvR8bmpE8mGCb8cQc18mlQNFlNDLKPLywTdjeAhlgYXYNDihKbg4BZaE4eJeD8DgtFIEsOCnSxrDA1YZ1iHhSAITQ6oWQ1YlibcJummbZoANn0ThJGakb2s4XgFBAdlhtaurSDgWAkDQFgkjoaJyEoY7TvoGJgC4eIzD4OhEWITaIAiVaImCBpUU4QavuYYhUQAeQibQqL%2B3hjrYQRgYYWhft20gsAiLxgDcMRaE27heCwFhDGAcQkfwN4HDwUFsbazBVDBYU1ja6kqlW5sImIH6PCwVaCGIPAWEh0hQWICJUkwCVMHxoxmyMEaFioAxgAUAA1PBMBNYGkkYfn%2BEEEQxHYKQZEERQVHUJHdDaAxpdMbrLH0PAIk2yAFhympsd7YHV17Ylu2tqxLC4bFeDY4geddeAFjsKiMhcayxlaUhAmCPpSgGNo8nSAQ49yVIM4YaZ%2BhiCYqijgQulGTVxnaEvajFfOU8L2wxSziZa6TmZU4j%2BlVgkerGpWpGOt2VQAA45t7ObJF2YBkGQXZ7u3VcIFwQgSH6rg5l4HatDmMa4km2aD%2BmhaGo4ZbSBatqOo2rahpl/aYEQEBnKSYULogK6zuIUJWDWEex4nqeM857xAXrwLcK9Q56G1sIUQ4gDbQONmoVa5tSAmjZkkSGvcOBNXPqtDqwNhQv3FKgKgQ9R7j0ntPWe89F4eBOp/NeG9b67R3qQca%2B9D4H0Wqfful91q2BvlvUa3CzC8KDvwoRrDBZpGcJIIAA%3D">GodBolt -O2 -std=c++17</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;chrono&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">TestCopy</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> source(<span style="color:#ae81ff">10000000</span>, <span style="color:#ae81ff">42</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">auto</span> start <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>high_resolution_clock<span style="color:#f92672">::</span>now();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> dest <span style="color:#f92672">=</span> source;  <span style="color:#75715e">// Copy
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">auto</span> end <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>high_resolution_clock<span style="color:#f92672">::</span>now();
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>duration<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span>, std<span style="color:#f92672">::</span>milli<span style="color:#f92672">&gt;</span> elapsed <span style="color:#f92672">=</span> end <span style="color:#f92672">-</span> start;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Copy took: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> elapsed.count() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; ms</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">TestMove</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> source(<span style="color:#ae81ff">10000000</span>, <span style="color:#ae81ff">42</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">auto</span> start <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>high_resolution_clock<span style="color:#f92672">::</span>now();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> dest <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>move(source);  <span style="color:#75715e">// Move
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">auto</span> end <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>high_resolution_clock<span style="color:#f92672">::</span>now();
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>chrono<span style="color:#f92672">::</span>duration<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span>, std<span style="color:#f92672">::</span>milli<span style="color:#f92672">&gt;</span> elapsed <span style="color:#f92672">=</span> end <span style="color:#f92672">-</span> start;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Move took: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> elapsed.count() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; ms</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    TestCopy();
</span></span><span style="display:flex;"><span>    TestMove();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>On most systems, the move operation will be orders of magnitude faster than the copy, (dependant on optimization levels).</p>
<h2 id="conclusion">Conclusion</h2>
<p>Move semantics are a powerful feature in modern C++ that enable efficient resource management and transfer of ownership. By understanding l-values and r-values, implementing move constructors and move assignment operators, and using <code>std::move</code> judiciously, you can write more efficient and expressive C++ code.</p>
<p>Remember: move semantics aren&rsquo;t about doing less work, they&rsquo;re about doing the <em>right</em> work at the <em>right</em> time. When an object is about to die anyway, why waste time copying its resources when we can simply take them?</p>
<p>Happy coding!</p>
</section>

  <section id="comments">
    <script src="https://utteranc.es/client.js"
        repo="MrDrElliot/DrElliotBlog"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
    </script>
</section>
</main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Dr. Elliot</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>1237 words</span>
    <span>10 - 13 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#understanding-l-values-and-r-values">Understanding L-values and R-values</a></li>
    <li><a href="#the-problem-move-semantics-solves">The Problem Move Semantics Solves</a></li>
    <li><a href="#enter-move-semantics">Enter Move Semantics</a></li>
    <li><a href="#when-to-use-move-semantics">When to Use Move Semantics</a>
      <ul>
        <li><a href="#1-returning-large-objects-from-functions">1. Returning Large Objects from Functions</a></li>
        <li><a href="#2-transferring-ownership-explicitly">2. Transferring Ownership Explicitly</a></li>
        <li><a href="#3-working-with-containers">3. Working with Containers</a></li>
        <li><a href="#4-implementing-the-rule-of-five">4. Implementing the Rule of Five</a></li>
      </ul>
    </li>
    <li><a href="#common-pitfalls-and-best-practices">Common Pitfalls and Best Practices</a>
      <ul>
        <li><a href="#dont-move-from-l-values-unless-intentional">Don&rsquo;t Move from L-values Unless Intentional</a></li>
        <li><a href="#mark-move-operations-as-noexcept">Mark Move Operations as <code>noexcept</code></a></li>
        <li><a href="#use-stdmove-carefully">Use <code>std::move</code> Carefully</a></li>
        <li><a href="#moved-from-objects-are-valid-but-unspecified">Moved-from Objects are Valid but Unspecified</a></li>
      </ul>
    </li>
    <li><a href="#performance-benefits">Performance Benefits</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav><h3>Related</h3>
    <ul><li><a href="/archive/movesemantics_old/">Move Semantics</a></li><li><a href="/posts/memory/softreferences/">What Are Soft References?</a></li><li><a href="/posts/general/constexpr/">Constexpr and Consteval</a></li><li><a href="/posts/general/vtable/">Fun with V-Tables</a></li><li><a href="/posts/memory/buffers/">Working With Buffers</a></li></ul></aside></div>
  </div>
</body>
</html>
